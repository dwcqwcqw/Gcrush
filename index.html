<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Gcrush - AI Companions</title>
    <!-- Favicon from R2 -->
    <link rel="icon" type="image/png" sizes="32x32" href="https://pub-a8c0ec3eb521478ab957033bdc7837e9.r2.dev/Asset/Favicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://pub-a8c0ec3eb521478ab957033bdc7837e9.r2.dev/Asset/Favicon.png">
    <link rel="shortcut icon" type="image/png" href="https://pub-a8c0ec3eb521478ab957033bdc7837e9.r2.dev/Asset/Favicon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://pub-a8c0ec3eb521478ab957033bdc7837e9.r2.dev/Asset/Favicon.png">
    <meta name="theme-color" content="#A259FF">
    <link rel="stylesheet" href="candy-combined.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Header -->
    <header class="site-header">
        <div class="header-container">
            <div class="header-left">
                <button class="menu-toggle">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="logo">
                    <a href="#"><img src="https://pub-a8c0ec3eb521478ab957033bdc7837e9.r2.dev/Asset/logo.png" alt="Gcrush" class="logo-img"></a>
                </div>
            </div>
            <div class="header-nav">
            </div>
            <div class="header-right">
                <button class="premium-button" style="display: none;">
                    <i class="fas fa-crown"></i>
                    <span>Premium</span>
                    <span class="discount">70% OFF</span>
                </button>
                <button class="auth-button create-account-btn">
                    <i class="fas fa-user-plus"></i> Create Account
                </button>
                <button class="auth-button login-btn">
                    <i class="fas fa-sign-in-alt"></i> Login
                </button>
                <div class="user-profile" style="display: none;">
                    <img src="" alt="User" class="profile-img">
                    <span class="username-display">My Profile</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
            </div>
        </div>
    </header>

    <div class="page-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <a href="#" class="sidebar-item active">
                    <i class="fas fa-compass"></i>
                    <span>Explore</span>
                </a>
                <a href="#" class="sidebar-item">
                    <i class="fas fa-comment"></i>
                    <span>Chat</span>
                </a>
                <a href="#" class="sidebar-item">
                    <i class="fas fa-user-circle"></i>
                    <span>Create Character</span>
                </a>
                <a href="#" class="sidebar-item">
                    <i class="fas fa-heart"></i>
                    <span>My AI</span>
                </a>
                <a href="generate-media.html" class="sidebar-item">
                    <i class="fas fa-image"></i>
                    <span>Generate Media</span>
                </a>
                <a href="#" class="sidebar-item">
                    <i class="fas fa-layer-group"></i>
                    <span>Collection</span>
                </a>
                <a href="#" class="sidebar-item premium">
                    <i class="fas fa-gem"></i>
                    <span>Become Premium</span>
                </a>
            </nav>
            
            <!-- Sidebar Footer -->
            <div class="sidebar-footer">
                <div class="sidebar-footer-item">
                    <img src="https://cdn.jsdelivr.net/gh/lipis/flag-icons@6.6.6/flags/4x3/us.svg" alt="English" class="flag-icon">
                    <span>English</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="sidebar-footer-item">
                    <i class="fab fa-discord"></i>
                    <span>Discord</span>
                </div>
                <div class="sidebar-footer-item">
                    <i class="fas fa-envelope"></i>
                    <span>Contact Us</span>
                </div>
                <div class="footer-legal">
                    <a href="/privacy-policy.html">Privacy Policy</a>
                    <span class="dot-separator">â€¢</span>
                    <a href="/terms-of-service.html">Terms of Service</a>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Hero Banner Carousel -->
            <section class="hero-banner">
                <div class="banner-carousel">
                    <!-- Banner 1 - Full Image -->
                    <div class="banner-slide active" data-slide="0">
                        <img src="https://pub-a8c0ec3eb521478ab957033bdc7837e9.r2.dev/Asset/banner1.png" alt="AI Companion Platform" class="banner-full-img">
                    </div>
                    
                    <!-- Banner 2 - Full Image -->
                    <div class="banner-slide" data-slide="1">
                        <img src="https://pub-a8c0ec3eb521478ab957033bdc7837e9.r2.dev/Asset/banner2.png" alt="Create Character" class="banner-full-img">
                    </div>
                    
                    <!-- Banner 3 - Video with Side Text -->
                    <div class="banner-slide" data-slide="2">
                        <div class="banner-split-container">
                            <div class="banner-video-side">
                                <video class="banner-video" loop muted autoplay >
                                    <source src="https://pub-a8c0ec3eb521478ab957033bdc7837e9.r2.dev/Asset/banner3.mp4" type="video/mp4">
                                </video>
                            </div>
                            <div class="banner-text-side">
                                <h2 class="banner-split-title">AI turns your dream guy into stunning photos and videos</h2>
                                <button class="banner-split-cta" onclick="window.location.href='generate-media.html'">Generate Media</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Banner Navigation -->
                <div class="banner-nav">
                    <button class="nav-dot active" data-slide="0"></button>
                    <button class="nav-dot" data-slide="1"></button>
                    <button class="nav-dot" data-slide="2"></button>
                </div>
            </section>

            <!-- Title Section -->
            <section class="title-section">
                <h1 class="page-title">Meet Your <span class="title-highlight">Soulmate</span></h1>
            </section>

            <!-- Character Lobby Section -->
            <section class="character-lobby">
                <div class="character-grid">
                    <!-- Character cards will be dynamically loaded here -->
                </div>
            </section>

            <!-- FAQ Section -->
            <section class="faq-section">
                <h2 class="section-title">Frequently Asked <span class="highlight">Questions</span></h2>
                
                <div class="accordion">
                    <!-- FAQ Item 1 -->
                    <div class="accordion-item glass-card">
                        <div class="accordion-header">
                            <h3>How does an AI boyfriend work?</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <p>An AI boyfriend isn't just a bunch of code; it's designed to mimic a real romantic partner. Through the magic of advanced algorithms and natural language, it chats, supports, and keeps you company, almost like it's reading your mind. It's not just about sending heart emojis; your AI lover has the communication skills and other features to create a believable, engaging experience that feels surprisingly human.</p>
                            <p>Whether it's NSFW AI chat or pleasant conversation, you can have everything you want with our revolutionary AI boyfriend. It's a lover designed by you, for you, down to every detail.</p>
                        </div>
                    </div>
                    
                    <!-- FAQ Item 2 -->
                    <div class="accordion-item glass-card">
                        <div class="accordion-header">
                            <h3>Can an AI boyfriend learn and adapt to a user's preferences?</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <p>Yes, our AI boyfriends are designed to learn from your interactions and adapt to your preferences over time. The more you interact with them, the better they understand your likes, dislikes, communication style, and interests.</p>
                        </div>
                    </div>
                    
                    <!-- FAQ Item 3 -->
                    <div class="accordion-item glass-card">
                        <div class="accordion-header">
                            <h3>What are the benefits of having an AI boyfriend?</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <p>AI boyfriends offer companionship without judgment, are available 24/7, help you practice communication and emotional expression, and can be customized to your ideal partner preferences. They provide a safe space to explore relationship dynamics and your emotional needs.</p>
                        </div>
                    </div>
                    
                    <!-- FAQ Item 4 -->
                    <div class="accordion-item glass-card">
                        <div class="accordion-header">
                            <h3>How does Gcrush handle my privacy with my AI boyfriend?</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <p>Gcrush takes your privacy seriously. All conversations with your AI boyfriend are private and encrypted. We do not share your personal information with third parties. You can also delete your chat history at any time.</p>
                        </div>
                    </div>
                    
                    <!-- FAQ Item 5 -->
                    <div class="accordion-item glass-card">
                        <div class="accordion-header">
                            <h3>How can I create my personalized AI boyfriend?</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <p>You can create your personalized AI boyfriend by signing up, selecting a base character from our gallery, and then customizing his appearance, personality traits, interests, and backstory. You can also upload images to create a unique look for your AI boyfriend.</p>
                        </div>
                    </div>
                    
                    <!-- FAQ Item 6 -->
                    <div class="accordion-item glass-card">
                        <div class="accordion-header">
                            <h3>Can I receive pictures of my AI Boyfriend?</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <p>Yes, with a premium subscription, you can receive AI-generated images of your boyfriend in various scenarios and outfits. These images are created based on the appearance you've designed for your AI companion.</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Auth Modal with Supabase Auth UI -->
    <div class="modal-overlay" id="authModal">
        <div class="modal-content auth-modal">
                        <button class="modal-close">&times;</button>
            <div id="auth-container"></div>
            <p class="auth-disclaimer">
                By signing up you confirm that you are over 18 years old and agree to the <a href="/terms-of-service.html">Terms of Service</a>.
            </p>
        </div>
    </div>
    
    <!-- Profile Modal -->
    <div class="modal-overlay" id="profileModal">
        <div class="modal-content auth-modal">
            <button class="modal-close" onclick="closeModal(profileModal)">&times;</button>
            <h2 class="modal-title">Complete Your Profile</h2>
            <p class="modal-subtitle">These details are optional and can be updated later</p>
            <form id="profileForm" class="auth-form">
                <div class="form-group">
                    <input type="text" id="profileUsername" placeholder="Username (optional)">
                </div>
                <div class="form-row">
                    <div class="form-group half">
                        <select id="profileGender">
                            <option value="">Select Gender (optional)</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                            <option value="prefer_not_to_say">Prefer not to say</option>
                        </select>
                    </div>
                    <div class="form-group half">
                        <input type="number" id="profileAge" placeholder="Age (optional)" min="18" max="120">
                    </div>
                </div>
                <div class="form-buttons">
                    <button type="submit" class="submit-btn">Save Profile</button>
                    <button type="button" class="submit-btn secondary" onclick="closeModal(profileModal)">Skip for now</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="inline-debug.js"></script>
    <script src="candy-combined.js"></script>
    <script src="character-data-loader.js"></script>
    <script src="auth-simple.js"></script>
    
    <!-- Password Reset Error Handler -->
    <script>
        // Check for password reset errors on page load
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const hashParams = new URLSearchParams(window.location.hash.substring(1));
            
            // Check for password reset code parameter
            const resetCode = urlParams.get('code');
            if (resetCode) {
                console.log('Password reset code detected:', resetCode);
                
                // Redirect to reset password page with the code
                const resetURL = `/reset-password.html?code=${resetCode}`;
                console.log('Redirecting to:', resetURL);
                window.location.href = resetURL;
                return;
            }
            
            // Check for password reset errors
            const errorCode = urlParams.get('error_code') || hashParams.get('error_code');
            const error = urlParams.get('error') || hashParams.get('error');
            const errorDescription = urlParams.get('error_description') || hashParams.get('error_description');
            
            if (errorCode === 'otp_expired' || error === 'access_denied') {
                console.log('Password reset error detected:', { errorCode, error, errorDescription });
                
                // Show password reset error modal
                showPasswordResetErrorModal(errorDescription);
                
                // Clean up URL
                const cleanUrl = window.location.origin + window.location.pathname;
                window.history.replaceState({}, document.title, cleanUrl);
            }
        });
        
        function showPasswordResetErrorModal(errorDescription) {
            let message = 'Password reset link has expired or is invalid.';
            
            if (errorDescription) {
                if (errorDescription.includes('expired')) {
                    message = 'Password reset link has expired.';
                } else if (errorDescription.includes('invalid')) {
                    message = 'Password reset link is invalid.';
                }
            }
            
            // Create and show error modal
            const errorModal = document.createElement('div');
            errorModal.className = 'modal-overlay';
            errorModal.style.display = 'flex';
            errorModal.innerHTML = `
                <div class="modal-content auth-modal" style="max-width: 400px;">
                    <button class="modal-close" onclick="this.closest('.modal-overlay').remove()">&times;</button>
                    <div style="text-align: center; padding: 20px;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 3rem; color: #ffc107; margin-bottom: 20px;"></i>
                        <h2 style="color: #fff; margin-bottom: 15px;">Password Reset Link Expired</h2>
                        <p style="color: #ccc; margin-bottom: 25px;">${message} Please request a new password reset link.</p>
                        <div style="display: flex; gap: 10px; justify-content: center;">
                            <button onclick="showForgotPasswordModal()" class="submit-btn" style="flex: 1;">
                                <i class="fas fa-key"></i>
                                Reset Password
                            </button>
                            <button onclick="this.closest('.modal-overlay').remove()" class="submit-btn secondary" style="flex: 1;">
                                <i class="fas fa-times"></i>
                                Close
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(errorModal);
            
            // Auto-remove after 30 seconds
            setTimeout(() => {
                if (errorModal.parentNode) {
                    errorModal.remove();
                }
            }, 30000);
        }
        
        function showForgotPasswordModal() {
            // Close error modal
            const errorModal = document.querySelector('.modal-overlay');
            if (errorModal) {
                errorModal.remove();
            }
            
            // Redirect to dedicated forgot password page
            window.location.href = '/forgot-password.html';
        }
    </script>
</body>
</html>